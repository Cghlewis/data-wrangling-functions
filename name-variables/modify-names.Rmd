---
title: "Modify variable names"
output: 
  html_document:
    anchor_sections: FALSE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(comment = NA,
                      message = FALSE,
                      warning = FALSE)
```

<br>

### Package: dplyr

---

#### Function: `rename_with()`

---

* Note: Unlike `dplyr::rename()` where you can rename individual columns, `dplyr::rename_with()` renames columns using a function.

* Note: You can either rename all variables or select variables with `dplyr::rename_with()`. The order is, *(function used to rename, columns selected)*. If you don't select columns, all variables will be renamed.

<br>

**1\. Remove all periods in variable names and replace with underscores**

Review the data (d2)

```{r, echo=FALSE}

source("data.R")
d2

```

Modify variable names by adding the `stringr::str_replace()` function.

* Note: If there were more than one period in the variable names, you could also use `stringr::str_replace_all()` to remove all instances of periods, rather than just the first instance.

```{r}

d2 %>% dplyr::rename_with(~ stringr::str_replace(., "\\.", "_"))

```


**2\. Remove 1:, 2: and 3: from Var1, Var2 and Var3**

Review the data (d6)

```{r, echo=FALSE}

source("data.R")
d6

```

Modify variable names by adding the `stringr::str_remove()` function.

```{r}

d6 %>% dplyr::rename_with(~ stringr::str_remove(., "[:digit:]:"))

```


**3\. For any variable that starts with "s_", remove the prefix**

Review the data (d5)

```{r, echo=FALSE}

source("data.R")
d5

```

Modify variable names by adding the `stringr::str_remove()` function and the selection helper `contains()`.

* Note: Other `tidyselect` selection helpers include `startswith()`, `ends_with()`, `matches`, `num_range`, `where` and more.

```{r}

d5 %>% dplyr::rename_with(~ stringr::str_remove(., "s_"), tidyselect::contains("var"))

```

<br>

### Package: purrr

---

#### Function: `set_names()`

---

* Note: You can use `purrr::set_names()` to modify names as well, but it doesn't have the nice compatibility with `tidyselect` that allows you to modify only select variable names. But `dplyr::set_names()` works well to modify all variable names.


<br>

**1\. Remove s_ in variable names**

Review the data (d2)

```{r, echo=FALSE}

source("data.R")
d5

```

Modify variable names by adding the `stringr::str_remove()` function.

* Note: If there were more than one period in the variable names, you could also use `stringr::str_replace_all()` to remove all instances of s_ in a variable name, rather than just the first instance.

```{r}

d5 %>% purrr::set_names(~ stringr::str_remove(., "s_"))

```


