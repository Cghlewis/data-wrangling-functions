---
title: "Collapse categories"
output: 
  html_document:
    anchor_sections: FALSE
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(comment = NA,
                      message = FALSE,
                      warning = FALSE)
```

<br>

### Package: dplyr

---

#### Function: `if_else()`

---

**1\. Collapse all "Google Meet" into one category**

Review the data (d6)

```{r, echo=FALSE}

source("data.R")
d6

```

Collapse all spellings of Google Meet into one uniform category function

* Note: We are recoding into a new variable using `dplyr::mutate()` and naming the new variable a different name than the original. It keeps both the new and old versions of the variable. 

* Note: Using `stringr::str_detect()` we can detect different spellings of google meet

```{r}

d6 %>%  
  dplyr::mutate(online_platform_new=dplyr::if_else(
  stringr::str_detect(online_platform,c("google|meet")), "Google Meet", online_platform))

```

We can also do this using `%in%` instead of `stringr::str_detect()`

```{r}

d6 %>%  
  dplyr::mutate(online_platform_new=dplyr::if_else(
  online_platform %in% c("google","meet", "Google Meet"), "Google Meet", online_platform))

```


---

#### Function: `case_when()`

---

**1\. Collapse all "Google Meet" into one category**

Review the data (d6)

```{r, echo=FALSE}

source("data.R")
d6

```

Collapse all spellings of Google Meet into one uniform category

* Note: We are recoding into a new variable using `dplyr::mutate()` and naming the new variable a different name than the original. It keeps both the new and old versions of the variable. 

* Note: Using `stringr::str_detect()` we can detect different spellings of google meet

```{r}

d6 %>%  
  dplyr::mutate(online_platform_new = dplyr::case_when(
  stringr::str_detect(online_platform,"google") ~ "Google Meet", 
  stringr::str_detect(online_platform,"meet") ~ "Google Meet", 
  TRUE ~ online_platform))

```


#### Function: `recode()`

---

**Note:**  The `dplyr::recode()` formula is: old value=new value, this is opposite of `dplyr::rename()`

<br>

**1\. Collapse all "Google Meet" into one category**

Review the data (d6)

```{r, echo=FALSE}

source("data.R")
d6

```

Collapse all spellings of Google Meet into one uniform category

* Note: We are recoding into a new variable using `dplyr::mutate()` and naming the new variable a different name than the original. It keeps both the new and old versions of the variable. 

```{r}

d6 %>%  
  dplyr::mutate(online_platform_new=dplyr::recode(
  online_platform, google = "Google Meet", meet = "Google Meet"))

```

